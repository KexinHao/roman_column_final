<!DOCTYPE HTML>
<html>
<head>
  <script src="output-1.js"></script>
  <!-- <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
  <script src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js"></script> -->
  <!-- Download this from the link above -->
  <script src="jquery-1.7.2.min.js"></script>
  <script src="jquery-ui.min.js"></script>
  <script src="jquery.ui.touch-punch.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
  <script src="https://unpkg.com/interactjs/dist/interact.min.js"></script>


  <style>
  /* .tile {
    position: absolute;
  } */
   /* .tile{
     transform: scale(0.8);
   } */

  </style>
  <script type="text/javascript">
  function load_taobao_images(){
    var div = document.getElementById('data');

    for(var i = 0; i < images.length; i++){
      var img = "<img class='tile' src='" + images[i] + "'>";
      div.innerHTML = div.innerHTML + img;
    }
  }
  </script>

</head>
<body onload="load_taobao_images()">
  <div id="data">
  </div>
  <script>
  $(document).ready(function(){
    setTimeout(function(){
      $( ".tile" ).draggable();
    }, 30);
  });

// interact('.tile')
//   .resizable(
//     {
//       edges: { left: true, right: true, bottom: true, top: true },
//       modifiers: [
//       // keep the edges inside the parent
//       interact.modifiers.restrictEdges({
//         outer: 'parent',
//         endOnly: true
//       }),
//       // minimum size
//       interact.modifiers.restrictSize({
//          min: { width: 100, height: 50 }
//       })
//     ],
//      inertia: true
//     }
//    )
//
//    .on('resizemove',function(event){
//      var target = event.target
//      var x = (parseFloat(target.getAttribute('data-x')) || 0)
//      var y = (parseFloat(target.getAttribute('data-y')) || 0)
//      // update the element's style
//      target.style.width = event.rect.width + 'px'
//      target.style.height = event.rect.height + 'px'
//
//      // translate when resizing from top or left edges
//      x += event.deltaRect.left
//      y += event.deltaRect.top
//
//      target.style.webkitTransform = target.style.transform =
//      'translate(' + x + 'px,' + y + 'px)'
//
//      target.setAttribute('data-x', x)
//      target.setAttribute('data-y', y)
//      target.textContent = Math.round(event.rect.width) + '\u00D7' + Math.round(event.rect.height)
//    })

var angleScale = {
  angle: 0,
  scale: 1
}

var gestureArea = document.querySelector('.tile');
var scaleElement = document.querySelector('.tile');
var resetTimeout

interact(gestureArea)
  .gesturable({
    onstart: function (event) {
      angleScale.angle -= event.angle

      clearTimeout(resetTimeout)
      scaleElement.classList.remove('reset')
    },
    onmove: function (event) {
      // document.body.appendChild(new Text(event.scale))
      var currentAngle = event.angle + angleScale.angle
      var currentScale = event.scale * angleScale.scale

      scaleElement.style.webkitTransform =
      scaleElement.style.transform =
        'rotate(' + currentAngle + 'deg)' + 'scale(' + currentScale + ')'

      // uses the dragMoveListener from the draggable demo above
      dragMoveListener(event)
    },
    onend: function (event) {
      angleScale.angle = angleScale.angle + event.angle
      angleScale.scale = angleScale.scale * event.scale

      resetTimeout = setTimeout(reset, 1000)
      scaleElement.classList.add('reset')
    }
  })
  // .draggable({ onmove: dragMoveListener })

function reset () {
  scaleElement.style.webkitTransform =
    scaleElement.style.transform =
    'scale(1)'

  angleScale.angle = 0
  angleScale.scale = 1
}
  </script>
</body>

</html>
